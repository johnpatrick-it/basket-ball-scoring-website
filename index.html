<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Basketball Scorer</title>
<link rel="icon" type="image/x-icon" href="favicon/favicon.ico">
<link rel="icon" type="image/png" sizes="96x96" href="favicon/favicon-96x96.png">
<link rel="icon" type="image/svg+xml" href="favicon/favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon.png">
<link rel="manifest" href="favicon/site.webmanifest">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700;1,9..40,400&display=swap" rel="stylesheet">
<link rel="stylesheet" href="style.css">
</head>
<body>
<div class="app">
  <!-- Scoreboard -->
  <div class="scoreboard">
    <div class="scoreboard-inner">
      <div class="team-score">
        <input type="text" class="team-name" id="homeName" value="HOME" maxlength="16" spellcheck="false" aria-label="Home team name">
        <div class="score-value" id="homeScore">0</div>
        <div class="timeout-tracker">
          <span class="timeout-label">Timeouts</span>
          <div class="timeout-dots">
            <button class="timeout-dot" onclick="toggleTimeout('home',0)" id="homeTimeout0"></button>
            <button class="timeout-dot" onclick="toggleTimeout('home',1)" id="homeTimeout1"></button>
            <button class="timeout-dot" onclick="toggleTimeout('home',2)" id="homeTimeout2"></button>
            <button class="timeout-dot" onclick="toggleTimeout('home',3)" id="homeTimeout3"></button>
            <button class="timeout-dot" onclick="toggleTimeout('home',4)" id="homeTimeout4"></button>
          </div>
        </div>
        <div class="foul-counter">
          <span class="foul-label">Team Fouls</span>
          <div class="foul-count" id="homeFoulCount">0</div>
          <span class="foul-status" id="homeFoulStatus"></span>
        </div>
      </div>
      <div class="center-info">
        <div class="period-label" id="periodLabel">Q1</div>
        <div class="vs-divider">VS</div>
        <div class="period-controls">
          <button class="period-btn" onclick="prevPeriod()" aria-label="Previous period">&larr; Prev</button>
          <button class="period-btn" onclick="nextPeriod()" aria-label="Next period">Next &rarr;</button>
        </div>
      </div>
      <div class="team-score">
        <input type="text" class="team-name" id="awayName" value="AWAY" maxlength="16" spellcheck="false" aria-label="Away team name">
        <div class="score-value" id="awayScore">0</div>
        <div class="timeout-tracker">
          <span class="timeout-label">Timeouts</span>
          <div class="timeout-dots">
            <button class="timeout-dot" onclick="toggleTimeout('away',0)" id="awayTimeout0"></button>
            <button class="timeout-dot" onclick="toggleTimeout('away',1)" id="awayTimeout1"></button>
            <button class="timeout-dot" onclick="toggleTimeout('away',2)" id="awayTimeout2"></button>
            <button class="timeout-dot" onclick="toggleTimeout('away',3)" id="awayTimeout3"></button>
            <button class="timeout-dot" onclick="toggleTimeout('away',4)" id="awayTimeout4"></button>
          </div>
        </div>
        <div class="foul-counter">
          <span class="foul-label">Team Fouls</span>
          <div class="foul-count" id="awayFoulCount">0</div>
          <span class="foul-status" id="awayFoulStatus"></span>
        </div>
      </div>
    </div>
  </div>

  <!-- Team Panels -->
  <div class="main-layout">
    <div class="team-panel" id="homePanel">
      <div class="panel-header">
        <div class="panel-title" id="homePanelTitle">HOME ROSTER</div>
      </div>
      <div class="add-player-row">
        <input type="text" class="input-name" id="homePlayerName" placeholder="Player name" maxlength="24">
        <input type="text" class="input-number" id="homePlayerNum" placeholder="#" maxlength="3">
        <select class="input-position" id="homePlayerPos">
          <option value="">Pos</option>
          <option value="PG">PG</option>
          <option value="SG">SG</option>
          <option value="SF">SF</option>
          <option value="PF">PF</option>
          <option value="C">C</option>
        </select>
        <button class="btn-add" onclick="addPlayer('home')">Add</button>
      </div>
      <div class="player-list" id="homePlayerList"></div>
    </div>
    <div class="team-panel" id="awayPanel">
      <div class="panel-header">
        <div class="panel-title" id="awayPanelTitle">AWAY ROSTER</div>
      </div>
      <div class="add-player-row">
        <input type="text" class="input-name" id="awayPlayerName" placeholder="Player name" maxlength="24">
        <input type="text" class="input-number" id="awayPlayerNum" placeholder="#" maxlength="3">
        <select class="input-position" id="awayPlayerPos">
          <option value="">Pos</option>
          <option value="PG">PG</option>
          <option value="SG">SG</option>
          <option value="SF">SF</option>
          <option value="PF">PF</option>
          <option value="C">C</option>
        </select>
        <button class="btn-add" onclick="addPlayer('away')">Add</button>
      </div>
      <div class="player-list" id="awayPlayerList"></div>
    </div>
  </div>

  <!-- Actions -->
  <div class="actions-section">
    <div class="actions-title">Actions</div>
    <div class="active-player-indicator" id="activeIndicator">
      Selected: <strong id="activePlayerDisplay"></strong>
    </div>
    <div class="no-player-warning" id="noPlayerWarning">Select a player from a roster above to record stats</div>
    <div class="action-grid">
      <!-- Scoring -->
      <div class="split-btn">
        <span class="split-title">2-Point Field Goal</span>
        <button class="split-left scoring-make" onclick="recordAction('pts2')">
          <span class="split-icon">2</span>
          <span class="split-label">Made</span>
        </button>
        <button class="split-right scoring-miss" onclick="recordAction('miss2')">
          <span class="split-icon">‚úï</span>
          <span class="split-label">Miss</span>
        </button>
      </div>
      <div class="split-btn">
        <span class="split-title">3-Point Field Goal</span>
        <button class="split-left scoring-make" onclick="recordAction('pts3')">
          <span class="split-icon">3</span>
          <span class="split-label">Made</span>
        </button>
        <button class="split-right scoring-miss" onclick="recordAction('miss3')">
          <span class="split-icon">‚úï</span>
          <span class="split-label">Miss</span>
        </button>
      </div>
      <div class="split-btn">
        <span class="split-title">Free Throw</span>
        <button class="split-left scoring-make" onclick="recordAction('ft')">
          <span class="split-icon">FT</span>
          <span class="split-label">Made</span>
        </button>
        <button class="split-right scoring-miss" onclick="recordAction('missft')">
          <span class="split-icon">‚úï</span>
          <span class="split-label">Miss</span>
        </button>
      </div>

      <!-- Rebounds -->
      <div class="split-btn">
        <span class="split-title">Rebounds</span>
        <button class="split-left reb-offensive" onclick="recordAction('oreb')">
          <span class="split-icon">OFF</span>
          <span class="split-label">Offensive</span>
        </button>
        <button class="split-right reb-defensive" onclick="recordAction('dreb')">
          <span class="split-icon">DEF</span>
          <span class="split-label">Defensive</span>
        </button>
      </div>

      <!-- Defensive Stats -->
      <button class="action-btn stat-defensive" onclick="recordAction('stl')"><span class="btn-icon">S</span>Steal</button>
      <button class="action-btn stat-defensive" onclick="recordAction('blk')"><span class="btn-icon">B</span>Block</button>

      <!-- Offensive Stats -->
      <button class="action-btn stat-offensive" onclick="recordAction('ast')"><span class="btn-icon">A</span>Assist</button>

      <!-- Negative Stats -->
      <button class="action-btn stat-negative" onclick="recordAction('to')"><span class="btn-icon">T</span>Turnover</button>
      <button class="action-btn stat-negative" onclick="recordAction('fls')"><span class="btn-icon">F</span>Foul</button>

      <!-- Timeouts -->
      <div class="split-btn">
        <span class="split-title">Team Timeout</span>
        <button class="split-left timeout-home" onclick="useTimeout('home')">
          <span class="split-icon">‚è±</span>
          <span class="split-label">Home</span>
        </button>
        <button class="split-right timeout-away" onclick="useTimeout('away')">
          <span class="split-icon">‚è±</span>
          <span class="split-label">Away</span>
        </button>
      </div>
    </div>

    <div class="utility-actions">
      <button class="util-btn undo-btn" onclick="undoAction()" title="Undo Last Action">
        <span class="util-icon">&larr;</span>Undo Last
      </button>
      <button class="util-btn new-game-btn" onclick="confirmNewGame()" title="Start New Game (Clear All Data)">
        <span class="util-icon">&times;</span>New Game
      </button>
      <button class="util-btn export-btn" onclick="exportCSV()" title="Export Stats as CSV File">
        <span class="util-icon">CSV</span>Export CSV
      </button>
      <button class="util-btn export-btn" onclick="exportPDF()" title="Export Game Report as PDF">
        <span class="util-icon">PDF</span>Box Score
      </button>
      <button class="util-btn export-btn" onclick="exportRunningScorePDF()" title="Export Play-by-Play as PDF">
        <span class="util-icon">üìã</span>Play-by-Play
      </button>
    </div>
  </div>

  <!-- Stats Tables -->
  <div class="stats-section">
    <div class="stats-header">
      <div class="stats-title">Player Stats</div>
      <div class="stats-toggle">
        <button class="team-toggle active" onclick="showStats('home',this)" id="statsHomeBtn">Home</button>
        <button class="team-toggle" onclick="showStats('away',this)" id="statsAwayBtn">Away</button>
        <button class="team-toggle" onclick="showStats('both',this)" id="statsBothBtn">Both</button>
        <button class="help-toggle" onclick="showTutorial()" aria-label="Show tutorial" title="Show tutorial">?</button>
      </div>
    </div>
    <table class="stats-table">
      <thead>
        <tr>
          <th>Player</th>
          <th data-full="Jersey Number">#</th>
          <th data-full="Position">POS</th>
          <th data-full="Points">PTS</th>
          <th data-full="Field Goals Made">FGM</th>
          <th data-full="Field Goals Attempted">FGA</th>
          <th data-full="3-Pointers Made">3PM</th>
          <th data-full="3-Pointers Attempted">3PA</th>
          <th data-full="Free Throws Made">FTM</th>
          <th data-full="Free Throws Attempted">FTA</th>
          <th data-full="Offensive Rebounds">OREB</th>
          <th data-full="Defensive Rebounds">DREB</th>
          <th data-full="Total Rebounds">REB</th>
          <th data-full="Assists">AST</th>
          <th data-full="Steals">STL</th>
          <th data-full="Blocks">BLK</th>
          <th data-full="Turnovers">TO</th>
          <th data-full="Personal Fouls">FLS</th>
        </tr>
      </thead>
      <tbody id="statsBody"></tbody>
    </table>
  </div>

  <!-- Running Score -->
  <div class="running-score-section">
    <div class="running-score-header" onclick="toggleRunningScore()">
      <div class="running-score-title">
        <span class="collapse-icon" id="runningScoreIcon">‚ñº</span>
        Running Score
      </div>
      <div class="running-score-count" id="runningScoreCount">0 plays</div>
    </div>
    <div class="running-score-content" id="runningScoreContent">
      <div class="running-score-timeline" id="runningScoreTimeline">
        <div class="no-plays-message">No scoring plays yet. Start recording points!</div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="app-footer">
    <div class="footer-content">
      <div class="footer-text">
        Created by <strong>John Patrick Haguimit</strong>
      </div>
      <a href="https://johnpatrick-it.github.io/portfolioV2/" target="_blank" rel="noopener noreferrer" class="footer-link">
        <span class="footer-icon">üåê</span>
        Check out more projects
      </a>
    </div>
  </footer>
</div>

<!-- Confirm Modal -->
<div class="modal-overlay" id="confirmModal">
  <div class="modal-box">
    <h3>New Game</h3>
    <p>This will clear all data: team names, rosters, scores, stats, and timeouts. Start completely fresh?</p>
    <div class="modal-actions">
      <button class="btn-cancel" onclick="closeModal()">Cancel</button>
      <button class="btn-confirm" onclick="newGame()">Clear All</button>
    </div>
  </div>
</div>

<!-- Period Change Modal -->
<div class="modal-overlay" id="periodModal">
  <div class="modal-box period-change-modal">
    <div class="period-change-icon">‚è±Ô∏è</div>
    <h3 id="periodChangeTitle">Quarter 2</h3>
    <p id="periodChangeMessage">Team fouls reset. Ready to continue?</p>
    <div class="score-summary">
      <div class="score-summary-item">
        <span class="score-team" id="periodHomeTeam">HOME</span>
        <span class="score-num" id="periodHomeScore">0</span>
      </div>
      <div class="score-vs">-</div>
      <div class="score-summary-item">
        <span class="score-team" id="periodAwayTeam">AWAY</span>
        <span class="score-num" id="periodAwayScore">0</span>
      </div>
    </div>
    <div class="modal-actions">
      <button class="btn-confirm single" onclick="closePeriodModal()">Continue</button>
    </div>
  </div>
</div>

<!-- Tutorial Spotlight -->
<div class="tutorial-backdrop" id="tutorialBackdrop">
  <div class="spotlight-hole" id="spotlightHole"></div>
</div>
<div class="tutorial-tooltip" id="tutorialTooltip">
  <div class="tooltip-arrow" id="tooltipArrow"></div>
  <div class="tutorial-progress" id="tutorialDots"></div>
  <h3 class="tooltip-title" id="tooltipTitle"></h3>
  <p class="tooltip-text" id="tooltipText"></p>
  <div class="tooltip-tip" id="tooltipTip"></div>
  <div class="tutorial-nav" id="tutorialNav"></div>
</div>

<!-- Help Button -->
<button class="help-fab" onclick="showTutorial()" aria-label="Replay tutorial" title="Replay tutorial">?</button>

<!-- Toast -->
<div class="toast" id="toast"></div>

<script src="script.js"></script>
</body>
</html>
